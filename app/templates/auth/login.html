{% extends "base.html" %}

{% block content %}
<div class="content-section" style="padding-top: calc(var(--navbar-height) + var(--space-2xl)); padding-bottom: var(--space-2xl); min-height: 100vh; display: flex; align-items: center;">
    <div class="container" style="max-width: 480px;">
        <!-- Login Card -->
        <div style="background: var(--color-bg-secondary); border: 1px solid var(--color-border-light); border-radius: var(--radius-xl); padding: var(--space-xl); box-shadow: var(--shadow-xl);">

            <!-- Header -->
            <div style="text-align: center; margin-bottom: var(--space-xl);">
                <div style="width: 80px; height: 80px; margin: 0 auto 20px; border-radius: var(--radius-lg); background: var(--gradient-primary); display: flex; align-items: center; justify-content: center; font-size: 40px; box-shadow: var(--shadow-primary);">
                    üîê
                </div>
                <h1 style="font-size: var(--font-size-2xl); font-weight: var(--font-weight-bold); margin-bottom: 8px;">
                    Welcome Back
                </h1>
                <p style="color: var(--color-text-tertiary); font-size: var(--font-size-base);">
                    Sign in to continue your learning journey
                </p>
            </div>

            <!-- Login Form -->
            <form method="POST">
                {{ form.hidden_tag() }}

                <!-- Username/Email Field -->
                <div class="form-group" style="margin-bottom: var(--space-md);">
                    {{ form.username_or_email.label(class="form-label") }}
                    {{ form.username_or_email(
                        class="form-input",
                        placeholder="Enter username or email",
                        style="border-color: " + ("var(--color-danger)" if form.username_or_email.errors else "")
                    ) }}
                    {% for error in form.username_or_email.errors %}
                    <div class="form-error">{{ error }}</div>
                    {% endfor %}
                </div>

                <!-- Password Field -->
                <div class="form-group" style="margin-bottom: var(--space-md);">
                    {{ form.password.label(class="form-label") }}
                    {{ form.password(
                        class="form-input",
                        placeholder="Enter your password",
                        style="border-color: " + ("var(--color-danger)" if form.password.errors else "")
                    ) }}
                    {% for error in form.password.errors %}
                    <div class="form-error">{{ error }}</div>
                    {% endfor %}
                </div>

                <!-- Remember Me -->
                <div style="margin-bottom: var(--space-lg);">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; user-select: none;">
                        {{ form.remember_me(style="cursor: pointer;") }}
                        <span style="color: var(--color-text-secondary); font-size: var(--font-size-base);">
                            {{ form.remember_me.label.text }}
                        </span>
                    </label>
                </div>

                <!-- Submit Button -->
                {{ form.submit(
                    class="btn btn-primary btn-lg",
                    style="width: 100%; margin-bottom: 16px;"
                ) }}
            </form>

            <!-- Divider -->
            <div style="position: relative; text-align: center; margin: var(--space-lg) 0;">
                <div style="position: absolute; top: 50%; left: 0; right: 0; height: 1px; background: var(--color-border-light);"></div>
                <span style="position: relative; background: var(--color-bg-secondary); padding: 0 16px; color: var(--color-text-muted); font-size: var(--font-size-sm);">
                    Don't have an account?
                </span>
            </div>

            <!-- Register Link -->
            <a href="{{ url_for('auth.register') }}"
               class="btn btn-secondary"
               style="width: 100%;">
                Create Account
            </a>
        </div>

        <!-- Additional Info -->
        <div style="text-align: center; margin-top: var(--space-lg); color: var(--color-text-muted); font-size: var(--font-size-sm);">
            <p>By signing in, you agree to our Terms of Service and Privacy Policy</p>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
    /* Remove default checkbox styling */
    input[type="checkbox"] {
        width: 18px;
        height: 18px;
        cursor: pointer;
        accent-color: var(--color-primary);
    }

    /* Focus states */
    .form-input:focus {
        border-color: var(--color-primary);
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
</style>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Focus first input
        const firstInput = document.querySelector('input[type="text"], input[type="email"]');
        if (firstInput) {
            firstInput.focus();
        }

        // Enter key submits form
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    document.querySelector('form').submit();
                }
            });
        });
    });
</script>
{% endblock %}
