{% extends "base.html" %}

{% block content %}
<div style="padding-top: calc(var(--navbar-height) + var(--space-2xl)); padding-bottom: var(--space-2xl); min-height: 100vh;">
    <div class="container" style="max-width: 1200px;">

        <!-- Page Header -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-xl); flex-wrap: wrap; gap: var(--space-md);">
            <div>
                <h1 style="font-size: var(--font-size-3xl); font-weight: var(--font-weight-extrabold); margin-bottom: 8px;">Account Settings</h1>
                <p style="color: var(--color-text-tertiary);">Manage your account information and preferences</p>
            </div>
            <a href="{{ url_for('auth.profile') }}" class="btn btn-primary">
                <span style="margin-right: 8px;">‚úèÔ∏è</span>Edit Profile
            </a>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 380px; gap: var(--space-md);">
            <!-- Left Column: Main Content -->
            <div style="display: flex; flex-direction: column; gap: var(--space-md);">
                <!-- Profile Information Card -->
                <div style="background: var(--color-bg-secondary); border: 1px solid var(--color-border-light); border-radius: var(--radius-xl); padding: var(--space-xl); box-shadow: var(--shadow-lg);">
                    <h2 style="font-size: var(--font-size-xl); font-weight: var(--font-weight-bold); margin-bottom: var(--space-lg); display: flex; align-items: center; gap: 8px;">
                        <span>üë§</span> Profile Information
                    </h2>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-lg);">
                        <div>
                            <strong style="color: var(--color-text-secondary); font-size: var(--font-size-sm); display: block; margin-bottom: 6px;">Username:</strong>
                            <div style="color: var(--color-text-primary); font-size: var(--font-size-md);">{{ current_user.username }}</div>
                        </div>
                        <div>
                            <strong style="color: var(--color-text-secondary); font-size: var(--font-size-sm); display: block; margin-bottom: 6px;">Email:</strong>
                            <div style="color: var(--color-text-primary); font-size: var(--font-size-md);">{{ current_user.email }}</div>
                        </div>
                        <div>
                            <strong style="color: var(--color-text-secondary); font-size: var(--font-size-sm); display: block; margin-bottom: 6px;">Member Since:</strong>
                            <div style="color: var(--color-text-primary); font-size: var(--font-size-md);">{{ stats.account_age if stats.account_age else current_user.created_at.strftime('%B %d, %Y') if current_user.created_at else 'Unknown' }}</div>
                        </div>
                        <div>
                            <strong style="color: var(--color-text-secondary); font-size: var(--font-size-sm); display: block; margin-bottom: 6px;">Account Status:</strong>
                            <div>
                                {% if current_user.is_active %}
                                    <span class="badge badge-success">‚úì Active</span>
                                {% else %}
                                    <span class="badge badge-danger">‚úó Inactive</span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Learning Statistics Card -->
                <div style="background: var(--color-bg-secondary); border: 1px solid var(--color-border-light); border-radius: var(--radius-xl); padding: var(--space-xl); box-shadow: var(--shadow-lg);">
                    <h2 style="font-size: var(--font-size-xl); font-weight: var(--font-weight-bold); margin-bottom: var(--space-lg); display: flex; align-items: center; gap: 8px;">
                        <span>üìä</span> Learning Statistics
                    </h2>

                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-md); text-align: center;">
                        <div style="background: rgba(102, 126, 234, 0.1); border: 1px solid var(--color-border-primary); border-radius: var(--radius-lg); padding: var(--space-lg);">
                            <div style="font-size: var(--font-size-3xl); font-weight: var(--font-weight-extrabold); color: var(--color-primary); margin-bottom: 8px;">
                                {{ stats.total_decks }}
                            </div>
                            <div style="color: var(--color-text-tertiary); font-size: var(--font-size-sm);">Total Decks</div>
                        </div>
                        <div style="background: rgba(52, 199, 89, 0.1); border: 1px solid rgba(52, 199, 89, 0.3); border-radius: var(--radius-lg); padding: var(--space-lg);">
                            <div style="font-size: var(--font-size-3xl); font-weight: var(--font-weight-extrabold); color: var(--color-success); margin-bottom: 8px;">
                                {{ stats.total_cards }}
                            </div>
                            <div style="color: var(--color-text-tertiary); font-size: var(--font-size-sm);">Total Cards</div>
                        </div>
                        <div style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: var(--radius-lg); padding: var(--space-lg);">
                            <div style="font-size: var(--font-size-3xl); font-weight: var(--font-weight-extrabold); color: var(--color-info); margin-bottom: 8px;">
                                0
                            </div>
                            <div style="color: var(--color-text-tertiary); font-size: var(--font-size-sm);">Study Sessions</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Sidebar -->
            <div style="display: flex; flex-direction: column; gap: var(--space-md);">
                <!-- Quick Actions Card -->
                <div style="background: var(--color-bg-secondary); border: 1px solid var(--color-border-light); border-radius: var(--radius-xl); padding: var(--space-lg); box-shadow: var(--shadow-md);">
                    <h6 style="font-weight: var(--font-weight-bold); margin-bottom: var(--space-md); display: flex; align-items: center; gap: 8px;">
                        <span>‚öôÔ∏è</span> Quick Actions
                    </h6>
                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        <a href="{{ url_for('auth.profile') }}" class="btn btn-secondary" style="width: 100%; justify-content: flex-start;">
                            <span style="margin-right: 8px;">‚úèÔ∏è</span>Edit Profile
                        </a>
                        <a href="{{ url_for('auth.change_password') }}" class="btn btn-secondary" style="width: 100%; justify-content: flex-start;">
                            <span style="margin-right: 8px;">üîë</span>Change Password
                        </a>
                        <a href="{{ url_for('decks.index') }}" class="btn btn-secondary" style="width: 100%; justify-content: flex-start;">
                            <span style="margin-right: 8px;">üìö</span>My Decks
                        </a>
                    </div>
                </div>

                <!-- Need Help Card -->
                <div style="background: var(--color-bg-secondary); border: 1px solid var(--color-border-light); border-radius: var(--radius-xl); padding: var(--space-lg); box-shadow: var(--shadow-md);">
                    <h6 style="font-weight: var(--font-weight-bold); margin-bottom: var(--space-md); display: flex; align-items: center; gap: 8px;">
                        <span>‚ùì</span> Need Help?
                    </h6>
                    <p style="color: var(--color-text-tertiary); font-size: var(--font-size-sm); margin-bottom: var(--space-md); line-height: var(--line-height-relaxed);">
                        Having trouble with your account or need assistance?
                    </p>
                    <a href="{{ url_for('main.help') }}" class="btn btn-secondary" style="width: 100%;">
                        <span style="margin-right: 8px;">üÜò</span>Get Support
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
    @media (max-width: 1024px) {
        div[style*="grid-template-columns: 1fr 380px"] {
            grid-template-columns: 1fr !important;
        }
    }

    @media (max-width: 768px) {
        div[style*="grid-template-columns: 1fr 1fr"],
        div[style*="grid-template-columns: repeat(3, 1fr)"] {
            grid-template-columns: 1fr !important;
        }
    }
</style>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        FlashFlow.showToast('Account overview loaded', 'info', 3000);
    });
</script>
{% endblock %}
